<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Content Manager</title>
    <script>
      window.CMS_MANUAL_INIT = true;
    </script>
    <script src="https://unpkg.com/decap-cms@^3.0.0/dist/decap-cms.js"></script>
  </head>
  <body>
    <div id="nc-root"></div>

    <script>
      window.addEventListener("load", function () {
        if (typeof CMS === "undefined") {
          console.error("CMS is not defined. Decap CMS script failed to load.");
          return;
        }

        CMS.init({
          config: {
            backend: {
              name: "git-gateway",
              branch: "main"
            },
            media_folder: "assets/blog-media",
            public_folder: "/assets/blog-media",
            collections: [
              {
                name: "blog",
                label: "Blog",
                folder: "content/blog",
                create: true,
                slug: "{{slug}}",
                fields: [
                  { label: "Title", name: "title", widget: "string" },
                  { label: "Publish Date", name: "date", widget: "datetime" },
                  {
                    label: "Featured Image",
                    name: "thumbnail",
                    widget: "image",
                    required: false,
                    hint: "Upload a thumbnail image for this post."
                  },
                  { label: "Body", name: "body", widget: "markdown" }
                ]
              }
            ]
          }
        });
      });
    </script>
  </body>
</html>
